<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="title" content="Incendio del Vesuvio, estate 2017">
    <meta name="description" content="A metà luglio 2017 un vasto incendio ha distrutto il patrimonio boschivo del Parco Nazionale del Vesuvio. Questa mappa consente di vedere i danni a distanza di anni." />
    <meta name="keywords" content="gis consulenza tutorial formazione">
    <meta name="author" content="Massimiliano Moraca">
    <meta http-equiv="Reply-to" content="info@massimilianomoraca.it">
    <meta http-equiv="content-language" content="IT">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="robots" content="INDEX,FOLLOW">
    <meta name="creation_Date" content="11 Luglio 2022">
    <meta name="revisit-after" content="7 days">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Incendio del Vesuvio, estate 2017</title>

    <!-- OpenGraph -->
    <meta property="og:title" content="Incendio del Vesuvio, estate 2017">
    <meta name="description" property="og:description" content="A metà luglio 2017 un vasto incendio ha distrutto il patrimonio boschivo del Parco Nazionale del Vesuvio. Questa mappa consente di vedere i danni a distanza di anni.">
    <meta property="og:type" content="article" >
    <meta property="og:image" content="https://massimilianomoraca.it/media/uploads/images/2021/08/01/incendio_vesuvio_2017.jpg">
    <meta property="og:url" content="webmap.massimilianomoraca.me">
    <meta name="twitter:creator" content="@maxdragonheart" />
    <meta name="twitter:card" value="summary_large_image">
    <meta name="twitter:title" content="Incendio del Vesuvio, estate 2017">
    <meta name="twitter:description" content="A metà luglio 2017 un vasto incendio ha distrutto il patrimonio boschivo del Parco Nazionale del Vesuvio. Questa mappa consente di vedere i danni a distanza di anni." />
    <meta name="twitter:image" content="https://massimilianomoraca.it/media/uploads/images/2021/08/01/incendio_vesuvio_2017.jpg" />

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
          integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
          crossorigin="anonymous"></script>
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
      integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
      integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
      crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous">
    <!-- Font Awesome -->
    <link rel="stylesheet"
        href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
        crossorigin="anonymous">
    <script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js"
          integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ"
          crossorigin="anonymous"></script>
    <!-- OpenLayers -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/ol@latest/ol.css">
    <script type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/ol@latest/dist/ol.js"></script>
    <!-- ol-ext -->
    <link rel="stylesheet" href="https://cdn.rawgit.com/Viglino/ol-ext/master/dist/ol-ext.min.css" />
    <script type="text/javascript" src="https://cdn.rawgit.com/Viglino/ol-ext/master/dist/ol-ext.min.js"></script>
    <!-- Plotly JS -->
    <script src="https://cdn.plot.ly/plotly-2.11.1.min.js"></script>
    <!-- Custom -->
    <link rel="stylesheet"
          href="../../../assets/css/ol_custom.css">
    <link rel="stylesheet"
          href="../../../assets/css/geomedia.css">
    <script type="text/javascript"
        src="../../../assets/js/geomedia.js"></script>
</head>
<body>

<div class="map-wrapper">

    <div class="map" id='map'></div>

    <div class="map-info">
        <button class="btn btn-map" type="button" data-bs-toggle="offcanvas" data-bs-target="#mapDescription" aria-controls="mapDescription">
            <span data-toggle="tooltip" data-placement="top" title="Descrizione">
                <i class="fas fa-book"></i>
            </span>
        </button>
        <div class="offcanvas offcanvas-end" tabindex="-1" id="mapDescription" aria-labelledby="mapDescriptionLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="mapDescriptionLabel">Incendio del Vesuvio, estate 2017</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <article class="text-justify">
                <p>Questa mappa, <strong>non ottimizzata per tablet e smartphone ma liberamente gestibile da pc</strong>, sfrutta i dati del progetto <a href="https://sentinel.esa.int/web/sentinel/missions/sentinel-2" target="_blank" rel="noopener">Copernicus Sentinel-2</a> per dare una lettura di parte del territorio campano a partire dal 2015.</p>
                <p>Vengono usati in particolare i dati relativi ai periodi estivi, combinati per calcolare l'indice NDVI che viene mostrato nell'area del grafico ogni volta che si clicca su un punto della mappa.</p>
                <p>Attivando e disattivando i layer satellitari &egrave; possibile inoltre visionare anche lo stato dei luoghi relativo al giorno censito. Per il solo 12 luglio 2017 viene riportato anche un layer da sensore infrarosso(SWIR - Short Wave Infra-Red); questo tipo di sensore consente di penetrare nuvole e fumo e grazie ad esso &egrave; possibile individuare i roghi presenti nel <a href="../../../../../blog/gis/analisi-dei-dati-copernicus-relativi-agli-incendi-sul-vesuvio-del-2017/" target="_blank" rel="noopener">Parco Nazionale del Vesuvio</a> ed in altre zone della Regione in quel giorno.</p>
            </article>
        </div>
    </div>

</div>

<div class="btn-map-legend">
    <button class="btn btn-map" type="button" data-bs-toggle="offcanvas" data-bs-target="#openMapControls" aria-controls="openMapControls">
        <span data-toggle="tooltip" data-placement="top" title="Descrizione">
            <i class="fas fa-layer-group"></i>
        </span>
    </button>
    <div class="offcanvas offcanvas-end" tabindex="-1" id="openMapControls" aria-labelledby="openMapControlsLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="openMapControlsLabel">Layers</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div class="px-2">

                <h5>Basemap</h5>
                <div class="custom-control custom-switch">
                    <input type="radio" class="custom-control-input" name="switch-basemap" id="BASEMAP_OSM" checked>
                    <label class="custom-control-label" for="BASEMAP_OSM">Lite</label>
                </div>
                <div class="custom-control custom-switch">
                    <input type="radio" class="custom-control-input" name="switch-basemap" id="BASEMAP_OUTDOORS">
                    <label class="custom-control-label" for="BASEMAP_OUTDOORS">Topographic</label>
                </div>
                <div class="custom-control custom-switch">
                    <input type="radio" class="custom-control-input" name="switch-basemap" id="BASEMAP_MONOCROMEGRAY">
                    <label class="custom-control-label" for="BASEMAP_MONOCROMEGRAY">Monocrome Gray</label>
                </div>
                <div class="custom-control custom-switch">
                    <input type="radio" class="custom-control-input" name="switch-basemap" id="BASEMAP_SATELLITE">
                    <label class="custom-control-label" for="BASEMAP_SATELLITE">Satellite</label>
                </div>

                <h5>Data</h5>

                <div class="control-box">
                    <div class="custom-control custom-switch">
                        <input type="checkbox" class="custom-control-input" name="switch-basemap" id="wmsCLC2018">
                        <label class="custom-control-label" for="wmsCLC2018">CORINE Land Cover 2018</label>
                    </div>
                    <div class="text-end">
                        <a class="item-legend" data-bs-toggle="collapse" href="#wmsCLC2018legend"
                            role="button" aria-expanded="false" aria-controls="wmsCLC2018legend"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="">
                            <i class="fas fa-book"></i>
                        </a>
                        <div class="collapse" id="wmsCLC2018legend">
                          <div id="legendwmsCLC2018"></div>
                        </div>
                    </div>
                    <div class="text-end">
                        <a class="item-controls" data-bs-toggle="collapse" href="#wmsCLC2018controls"
                            role="button" aria-expanded="false" aria-controls="wmsCLC2018controls"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="">
                            <i class="fas fa-cogs"></i>
                        </a>
                        <div class="collapse" id="wmsCLC2018controls">
                          <div class="slider-container">
                            <input type="range" class="form-range"
                                    min="0" max="100" value="100" id="wmsCLC2018slider">
                            <label class="">Trasparenza: <span id="OUTPUTwmsCLC2018"></span> %</label>
                          </div>
                          <div class="counter-container">
                            <div class="counter" id="">
                              <input class="counter-object" id="wmsCLC2018zIndex"
                                      type="number" name="zIndex" min="0" max="99" step="1"
                                      placeholder="0"
                                      value="0">
                            </div>
                            <label class="">z-Index</label>
                          </div>
                        </div>
                    </div>
                </div>

                <div class="control-box">
                    <div class="custom-control custom-switch">
                        <input type="checkbox" class="custom-control-input" name="switch-basemap" id="wmsTCI20220711">
                        <label class="custom-control-label" for="wmsTCI20220711">TCI 11 luglio 2022</label>
                    </div>
                    <div class="text-end">
                        <a class="item-controls" data-bs-toggle="collapse" href="#wmsTCI20220711controls"
                            role="button" aria-expanded="false" aria-controls="wmsTCI20220711controls"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="">
                            <i class="fas fa-cogs"></i>
                        </a>
                        <div class="collapse" id="wmsTCI20220711controls">
                          <div class="slider-container">
                            <input type="range" class="form-range"
                                    min="0" max="100" value="100" id="wmsTCI20220711slider">
                            <label class="">Trasparenza: <span id="OUTPUTwmsTCI20220711"></span> %</label>
                          </div>
                          <div class="counter-container">
                            <div class="counter" id="">
                              <input class="counter-object" id="wmsTCI20220711zIndex"
                                      type="number" name="zIndex" min="0" max="99" step="1"
                                      placeholder="0"
                                      value="0">
                            </div>
                            <label class="">z-Index</label>
                          </div>
                        </div>
                    </div>
                </div>

                <div class="control-box">
                    <div class="custom-control custom-switch">
                        <input type="checkbox" class="custom-control-input" name="switch-basemap" id="wmsTCI20170806">
                        <label class="custom-control-label" for="wmsTCI20170806">TCI 6 agosto 2017</label>
                    </div>
                    <div class="text-end">
                        <a class="item-controls" data-bs-toggle="collapse" href="#wmsTCI20170806controls"
                            role="button" aria-expanded="false" aria-controls="wmsTCI20170806controls"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="">
                            <i class="fas fa-cogs"></i>
                        </a>
                        <div class="collapse" id="wmsTCI20170806controls">
                          <div class="slider-container">
                            <input type="range" class="form-range"
                                    min="0" max="100" value="100" id="wmsTCI20170806slider">
                            <label class="">Trasparenza: <span id="OUTPUTwmsTCI20170806"></span> %</label>
                          </div>
                          <div class="counter-container">
                            <div class="counter" id="">
                              <input class="counter-object" id="wmsTCI20170806zIndex"
                                      type="number" name="zIndex" min="0" max="99" step="1"
                                      placeholder="0"
                                      value="0">
                            </div>
                            <label class="">z-Index</label>
                          </div>
                        </div>
                    </div>
                </div>

                <div class="control-box">
                    <div class="custom-control custom-switch">
                        <input type="checkbox" class="custom-control-input" name="switch-basemap" id="wmsSWIR20170712" checked>
                        <label class="custom-control-label" for="wmsSWIR20170712">SWIR 12 luglio 2017</label>
                    </div>
                    <div class="text-end">
                        <a class="item-controls" data-bs-toggle="collapse" href="#wmsSWIR20170712controls"
                            role="button" aria-expanded="false" aria-controls="wmsSWIR20170712controls"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="">
                            <i class="fas fa-cogs"></i>
                        </a>
                        <div class="collapse" id="wmsSWIR20170712controls">
                          <div class="slider-container">
                            <input type="range" class="form-range"
                                    min="0" max="100" value="100" id="wmsSWIR20170712slider">
                            <label class="">Trasparenza: <span id="OUTPUTwmsSWIR20170712"></span> %</label>
                          </div>
                          <div class="counter-container">
                            <div class="counter" id="">
                              <input class="counter-object" id="wmsSWIR20170712zIndex"
                                      type="number" name="zIndex" min="0" max="99" step="1"
                                      placeholder="0"
                                      value="0">
                            </div>
                            <label class="">z-Index</label>
                          </div>
                        </div>
                    </div>
                </div>

                <div class="control-box">
                    <div class="custom-control custom-switch">
                        <input type="checkbox" class="custom-control-input" name="switch-basemap" id="wmsTCI20170712">
                        <label class="custom-control-label" for="wmsTCI20170712">TCI 12 luglio 2017</label>
                    </div>
                    <div class="text-end">
                        <a class="item-controls" data-bs-toggle="collapse" href="#wmsTCI20170712controls"
                            role="button" aria-expanded="false" aria-controls="wmsTCI20170712controls"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="">
                            <i class="fas fa-cogs"></i>
                        </a>
                        <div class="collapse" id="wmsTCI20170712controls">
                          <div class="slider-container">
                            <input type="range" class="form-range"
                                    min="0" max="100" value="100" id="wmsTCI20170712slider">
                            <label class="">Trasparenza: <span id="OUTPUTwmsTCI20170712"></span> %</label>
                          </div>
                          <div class="counter-container">
                            <div class="counter" id="">
                              <input class="counter-object" id="wmsTCI20170712zIndex"
                                      type="number" name="zIndex" min="0" max="99" step="1"
                                      placeholder="0"
                                      value="0">
                            </div>
                            <label class="">z-Index</label>
                          </div>
                        </div>
                    </div>
                </div>

                <div class="control-box">
                    <div class="custom-control custom-switch">
                        <input type="checkbox" class="custom-control-input" name="switch-basemap" id="wmsTCI20160712">
                        <label class="custom-control-label" for="wmsTCI20160712">TCI 12 luglio 2016</label>
                    </div>
                    <div class="text-end">
                        <a class="item-controls" data-bs-toggle="collapse" href="#wmsTCI20160712controls"
                            role="button" aria-expanded="false" aria-controls="wmsTCI20160712controls"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="">
                            <i class="fas fa-cogs"></i>
                        </a>
                        <div class="collapse" id="wmsTCI20160712controls">
                          <div class="slider-container">
                            <input type="range" class="form-range"
                                    min="0" max="100" value="100" id="wmsTCI20160712slider">
                            <label class="">Trasparenza: <span id="OUTPUTwmsTCI20160712"></span> %</label>
                          </div>
                          <div class="counter-container">
                            <div class="counter" id="">
                              <input class="counter-object" id="wmsTCI20160712zIndex"
                                      type="number" name="zIndex" min="0" max="99" step="1"
                                      placeholder="0"
                                      value="0">
                            </div>
                            <label class="">z-Index</label>
                          </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- <div class="map-calculus">

    <button class="btn btn-map" type="button" data-bs-toggle="offcanvas" data-bs-target="#mapCalculus" aria-controls="mapCalculus">
        <span data-toggle="tooltip" data-placement="top" title="Analisi">
            <i class="fas fa-cogs"></i>
        </span>
    </button>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="mapCalculus" aria-labelledby="mapCalculusLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="mapCalculusLabel">Dati processati</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <article class="text-justify">
                <p>In questa mappa ci sono dati processati. Spunta il box che segue per visualizzare le tabelle e/o i grafici presenti.</p>
                <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="ShowData">
                    <label class="custom-control-label" for="ShowData">Visualizza</label>
                </div>
                <p class="bg-warning mt-1 px-2" id="gotoaction" style="display: none;">Chiudi questa finestra e clicca su un punto della mappa per visualizzare le tabelle e/o i grafici.</p>
            </article>
        </div>
    </div>

</div> -->

<div class="modal fade" id="surveyPointModal" tabindex="-1" aria-labelledby="surveyPointModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="surveyPointModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <img class="img-fluid img-chart" style="width: 100%; height: 600px;" alt="Chart from clicked point" src="">
      </div>
    </div>
  </div>
</div>
    

</div>

<script type="text/javascript">

    var map = new ol.Map({
        target: 'map',
        controls: ol.control.defaults({
            attribution: false
        }),
    });
    var scaleLine = new ol.control.ScaleLine({
        className: 'ol-scale-line',
        target: document.getElementById('scale-line')
    });
    map.addControl(scaleLine);
    var attribution = new ol.control.Attribution({
        className: 'ol-attribution',
        label: 'a',
        collapsible: true,
        collapsed: true,
        target: document.getElementById('map-attribution'),
    });
    map.addControl(attribution);
    var view = new ol.View({
        center: ol.proj.fromLonLat([14.42637, 40.82115]),
        zoom: 13,
        maxZoom: 16,
        minZoom: 10
    });
    map.setView(view);

    var osm = new ol.layer.Tile({
        source: new ol.source.OSM(),
        zIndex: 0
    });
    map.addLayer(osm);
    $('#BASEMAP_OSM').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(osm);
            map.removeLayer(outdoors);
            map.removeLayer(monocromeGray);
            map.removeLayer(satellite);
        } else {
            map.removeLayer(osm);
        }
    });
    var mapAttribution = '<a href="https://massimilianomoraca.it/" target="_blank">Massimiliano Moraca</a> has created this map using <a href="https://openlayers.org/" target="_blank">OpenLayers</a>'
    var userMapBox = 'maxdragonheart'
    var tokenMapBox = 'pk.eyJ1IjoibWF4ZHJhZ29uaGVhcnQiLCJhIjoiY2p4a2k3a2twMmF2aDN4czhwMzBoZ2x1eCJ9.upAxT3LK0NCiP_jBcErzNw'
    var outdoors = new ol.layer.Tile({
        title: 'Topographic',
        source: new ol.source.XYZ({
        attributions: mapAttribution,
            url: 'https://api.mapbox.com/styles/v1/' + userMapBox + '/'
                + 'cjxkimp5j5s0o1ct4b68n4x1p/tiles/256/{z}/{x}/{y}?'
                + 'access_token=' + tokenMapBox + ''
            }),
        zIndex: 0,
    });
    $('#BASEMAP_OUTDOORS').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(outdoors);
            map.removeLayer(osm);
            map.removeLayer(monocromeGray);
            map.removeLayer(satellite);
        } else {
            map.removeLayer(outdoors);
        }
    });
    var monocromeGray = new ol.layer.Tile({
        title: 'MonocromeGray',
        source: new ol.source.XYZ({
            attributions: mapAttribution,
            url: 'https://api.mapbox.com/styles/v1/' + userMapBox + '/'
                + 'ckcqb7nu809mu1inv9lfuj2ut/tiles/256/{z}/{x}/{y}?'
                + 'access_token=' + tokenMapBox + ''
        }),
        zIndex: 0,
    });
    $('#BASEMAP_MONOCROMEGRAY').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(monocromeGray);
            map.removeLayer(osm);
            map.removeLayer(outdoors);
            map.removeLayer(satellite);
        } else {
            map.removeLayer(monocromeGray);
        }
    });
    var satellite = new ol.layer.Tile({
        title: 'Satellite',
        source: new ol.source.XYZ({
            attributions: mapAttribution,
            url: 'https://api.mapbox.com/styles/v1/' + userMapBox + '/'
                + 'ck0l7j9cx27df1clhcyok70mk/tiles/256/{z}/{x}/{y}?'
                + 'access_token=' + tokenMapBox + ''
        }),
        zIndex: 0,
    });
    $('#BASEMAP_SATELLITE').on('change', function() {
    let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(satellite);
            map.removeLayer(osm);
            map.removeLayer(outdoors);
            map.removeLayer(monocromeGray);
        } else {
            map.removeLayer(satellite);
        }
    });

    var domain = 'https://geoserver.massimilianomoraca.me'
    var workspace = 'MassimilianoMoraca';
    var wmsSource = domain + '/geoserver/' + workspace + '/wms'

    var wmsTCI20220711 = new ol.layer.Tile({
        title: 'TCI 6 agosto 2017',
        source: new ol.source.TileWMS({
        url: wmsSource,
        params: {
            'LAYERS': 'RGB_Campania_20220711',
            'STYLES': null,
        }
        }),
        minZoom: 0,
        maxZoom: 28,
        zIndex: 1,
        opacity: 1.00
    });
    $('#wmsTCI20220711').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(wmsTCI20220711);
            layerOpacity(wmsTCI20220711, 'wmsTCI20220711slider', 'OUTPUTwmsTCI20220711');
            layerZIndex(wmsTCI20220711, 'wmsTCI20220711zIndex', 'OUTPUTwmsTCI20220711');
        } else {
            map.removeLayer(wmsTCI20220711);
        }
    });

    var wmsTCI20170806 = new ol.layer.Tile({
        title: 'TCI 6 agosto 2017',
        source: new ol.source.TileWMS({
        url: wmsSource,
        params: {
            'LAYERS': 'RGB_Campania_20170806',
            'STYLES': null,
        }
        }),
        minZoom: 0,
        maxZoom: 28,
        zIndex: 1,
        opacity: 1.00
    });
    $('#wmsTCI20170806').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(wmsTCI20170806);
            layerOpacity(wmsTCI20170806, 'wmsTCI20170806slider', 'OUTPUTwmsTCI20170806');
            layerZIndex(wmsTCI20170806, 'wmsTCI20170806zIndex', 'OUTPUTwmsTCI20170806');
        } else {
            map.removeLayer(wmsTCI20170806);
        }
    });

    var wmsSWIR20170712 = new ol.layer.Tile({
        title: 'TCI 6 agosto 2017',
        source: new ol.source.TileWMS({
        url: wmsSource,
        params: {
            'LAYERS': 'RGB_B12_Campania_20170712',
            'STYLES': null,
        }
        }),
        minZoom: 0,
        maxZoom: 28,
        zIndex: 0,
        opacity: 1.00
    });
    map.addLayer(wmsSWIR20170712);
    $('#wmsSWIR20170712').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(wmsSWIR20170712);
            layerOpacity(wmsSWIR20170712, 'wmsSWIR20170712slider', 'OUTPUTwmsSWIR20170712');
            layerZIndex(wmsSWIR20170712, 'wmsSWIR20170712zIndex', 'OUTPUTwmsSWIR20170712');
        } else {
            map.removeLayer(wmsSWIR20170712);
        }
    });

    var wmsTCI20170712 = new ol.layer.Tile({
        title: 'TCI 6 agosto 2017',
        source: new ol.source.TileWMS({
        url: wmsSource,
        params: {
            'LAYERS': 'RGB_Campania_20170712',
            'STYLES': null,
        }
        }),
        minZoom: 0,
        maxZoom: 28,
        zIndex: 1,
        opacity: 1.00
    });
    $('#wmsTCI20170712').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(wmsTCI20170712);
            layerOpacity(wmsTCI20170712, 'wmsTCI20170712slider', 'OUTPUTwmsTCI20170712');
            layerZIndex(wmsTCI20170712, 'wmsTCI20170712zIndex', 'OUTPUTwmsTCI20170712');
        } else {
            map.removeLayer(wmsTCI20170712);
        }
    });

    var wmsTCI20160712 = new ol.layer.Tile({
        title: 'TCI 6 agosto 2017',
        source: new ol.source.TileWMS({
        url: wmsSource,
        params: {
            'LAYERS': 'RGB_Campania_20160712',
            'STYLES': null,
        }
        }),
        minZoom: 0,
        maxZoom: 28,
        zIndex: 1,
        opacity: 1.00
    });
    $('#wmsTCI20160712').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(wmsTCI20160712);
            layerOpacity(wmsTCI20160712, 'wmsTCI20160712slider', 'OUTPUTwmsTCI20160712');
            layerZIndex(wmsTCI20160712, 'wmsTCI20160712zIndex', 'OUTPUTwmsTCI20160712');
        } else {
            map.removeLayer(wmsTCI20160712);
        }
    });

    var wmsCLC2018 = new ol.layer.Tile({
        title: 'CLC 2012',
        source: new ol.source.TileWMS({
        url: wmsSource,
        params: {
            'LAYERS': 'clc2018_v2020_20u1',
            'STYLES': 'CLC2018',
        }
        }),
        minZoom: 0,
        maxZoom: 28,
        zIndex: 1,
        opacity: 1.00
    });
    $('#wmsCLC2018').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(wmsCLC2018);
            getElementLegendImg('legendwmsCLC2018', wmsCLC2018, wmsSource, 'clc2018_v2020_20u1');
            layerOpacity(wmsCLC2018, 'wmsCLC2018slider', 'OUTPUTwmsCLC2018');
            layerZIndex(wmsCLC2018, 'wmsCLC2018zIndex', 'OUTPUTwmsCLC2018');
        } else {
            map.removeLayer(wmsCLC2018);
        }
    });

/*     $('#ShowData').on('change', function() {
      let isChecked = $(this).is(':checked');
      if (isChecked) {

        function simpleStyleFunction(feature, resolution) {
            feature_id = feature.get('fid').toString();

            var styleSimple = new ol.style.Style({
                image: new ol.style.Circle({
                    radius: 12,
                    fill: new ol.style.Fill({
                        color: '#ff0000'
                    }),
                    stroke: new ol.style.Stroke({
                        color: '#ffffff',
                        width: 4
                    }),
                }),
                text: new ol.style.Text({
                    font: '8px Calibri,sans-serif',
                    fill: new ol.style.Fill({
                        color:'#000'
                    }),
                    stroke: new ol.style.Stroke({
                        color:'#ffffff',
                        width: 3,
                    }),
                    textAlign: 'center',
                    offsetX: 0,
                    offsetY: 0,
                }),
            });
            styleSimple.getText().setText(feature_id);

            return styleSimple;
        };
        var domain = 'https://geoserver.massimilianomoraca.me'
        var workspace = 'MassimilianoMoraca';
        var layerName = 'vesuvio_survey_points';
        var layer = workspace + ':' + layerName;
        var projectionEpsgCode = '3857';
        var vectortileSource = new ol.layer.VectorTile({
            style: simpleStyleFunction,
            source: new ol.source.VectorTile({
                tilePixelRatio: 1, // oversampling when > 1
                tileGrid: ol.tilegrid.createXYZ({maxZoom: 19}),
                format: new ol.format.MVT(),
                url: domain + '/geoserver/gwc/service/tms/1.0.0/' + layer + '@EPSG%3A'+ projectionEpsgCode +'@pbf/{z}/{x}/{-y}.pbf'
            }),
        });
        map.addLayer(vectortileSource);
        map.on('singleclick', function (event) {
            var features = map.getFeaturesAtPixel(event.pixel);

            if (features.length > 0) {
                var properties = features[0].getProperties();
                $(".modal-title").text(properties['description']);
                $(".img-chart").attr("src", properties['chart']);
                $('#surveyPointModal').modal('show');
            }

        });

      } else {
        map.removeLayer(surveyPoints);
      }
    }); */

    function simpleStyleFunction(feature, resolution) {
            feature_id = feature.get('fid').toString();

            var styleSimple = new ol.style.Style({
                image: new ol.style.Circle({
                    radius: 12,
                    fill: new ol.style.Fill({
                        color: '#ff0000'
                    }),
                    stroke: new ol.style.Stroke({
                        color: '#ffffff',
                        width: 4
                    }),
                }),
                text: new ol.style.Text({
                    font: '8px Calibri,sans-serif',
                    fill: new ol.style.Fill({
                        color:'#000'
                    }),
                    stroke: new ol.style.Stroke({
                        color:'#ffffff',
                        width: 3,
                    }),
                    textAlign: 'center',
                    offsetX: 0,
                    offsetY: 0,
                }),
            });
            styleSimple.getText().setText(feature_id);

            return styleSimple;
        };

        var layerName = 'vesuvio_survey_points';
        var layer = workspace + ':' + layerName;
        var projectionEpsgCode = '3857';
        var vectortileSource = new ol.layer.VectorTile({
            style: simpleStyleFunction,
            source: new ol.source.VectorTile({
                tilePixelRatio: 1, // oversampling when > 1
                tileGrid: ol.tilegrid.createXYZ({maxZoom: 19}),
                format: new ol.format.MVT(),
                url: domain + '/geoserver/gwc/service/tms/1.0.0/' + layer + '@EPSG%3A'+ projectionEpsgCode +'@pbf/{z}/{x}/{-y}.pbf'
            }),
        });
        map.addLayer(vectortileSource);
        map.on('singleclick', function (event) {
            var features = map.getFeaturesAtPixel(event.pixel);

            if (features.length > 0) {
                var properties = features[0].getProperties();
                $(".modal-title").text(properties['description']);
                $(".img-chart").attr("src", properties['chart']);
                $('#surveyPointModal').modal('show');
            }

        });

</script>

</body>
</html>