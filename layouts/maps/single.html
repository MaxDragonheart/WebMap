{{ define "main" }}
<!-- Contenitore mappa full-page -->
<div id="map" class="map-container">

  <!-- Reset sotto ai pulsanti zoom -->
  <div class="ol-control reset-control">
    <button id="reset-view" type="button" title="Reset view">↺</button>
  </div>

  <!-- Basemap select (alto-dx, dentro la mappa) -->
  <div class="ol-control basemap-select">
    <select id="basemap-select" title="Seleziona basemap"></select>
  </div>

  <!-- Coordinate (alto-centro) -->
  <div id="coords-container" class="ol-control coords-container">Lon: —  Lat: —</div>

  <!-- Barra di scala (basso-centro) -->
  <div id="scale-container" class="ol-control scale-bar-container"></div>
</div>

<!-- Passo la config dal data -->
{{ $basename := .File.TranslationBaseName | default .File.BaseFileName }}
{{ $cfg := or (index site.Data.maps $basename) (index site.Data.maps (printf "%s-map" $basename)) (index site.Data.maps (printf "%s_map" $basename)) }}
<script>
  window.__MAP_CONFIG__ = {{ $cfg | jsonify }};
  window.__MAP_TITLE__  = {{ .Title | jsonify }};
</script>
{{ end }}
