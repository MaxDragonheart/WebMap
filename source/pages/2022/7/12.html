<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="title" content="Confronto pre-post esplosione nel porto di Beirut">
    <meta name="description" content="Il 4 agosto 2020 Beirut, capitale del Libano, è stata scossa da una violentissima esplosione, con questa mappa si confronta il prima ed il dopo." />
    <meta name="keywords" content="gis consulenza tutorial formazione">
    <meta name="author" content="Massimiliano Moraca">
    <meta http-equiv="Reply-to" content="info@massimilianomoraca.it">
    <meta http-equiv="content-language" content="IT">
    <meta http-equiv="Content-Type" content="text/html; iso-8859-1">
    <meta name="robots" content="INDEX,FOLLOW">
    <meta name="creation_Date" content="14 Luglio 2022">
    <meta name="revisit-after" content="7 days">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Confronto pre-post esplosione nel porto di Beirut</title>
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/MaxDragonheart/cdn@main/me/images/logo.png" type="image/gif">

    <!-- OpenGraph -->
    <meta property="og:title" content="Confronto pre-post esplosione nel porto di Beirut">
    <meta name="description" property="og:description" content="Il 4 agosto 2020 Beirut, capitale del Libano, è stata scossa da una violentissima esplosione, con questa mappa si confronta il prima ed il dopo.">
    <meta property="og:type" content="article" >
    <meta property="og:image" content="https://massimilianomoraca.it/media/uploads/images/2021/08/01/beirut.jpg">
    <meta property="og:url" content="webmap.massimilianomoraca.me">
    <meta name="twitter:creator" content="@maxdragonheart" />
    <meta name="twitter:card" value="summary_large_image">
    <meta name="twitter:title" content="Confronto pre-post esplosione nel porto di Beirut">
    <meta name="twitter:description" content="Il 4 agosto 2020 Beirut, capitale del Libano, è stata scossa da una violentissima esplosione, con questa mappa si confronta il prima ed il dopo." />
    <meta name="twitter:image" content="https://massimilianomoraca.it/media/uploads/images/2021/08/01/beirut.jpg" />

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
          integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
          crossorigin="anonymous"></script>
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
      integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
      integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
      crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous">
    <!-- Font Awesome -->
    <link rel="stylesheet"
        href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
        crossorigin="anonymous">
    <script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js"
          integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ"
          crossorigin="anonymous"></script>
    <!-- OpenLayers 6 -->
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.14.1/build/ol.js"></script>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.14.1/css/ol.css">
    <!-- ol-ext -->
    <link rel="stylesheet" href="https://cdn.rawgit.com/Viglino/ol-ext/master/dist/ol-ext.min.css" />
    <script type="text/javascript" src="https://cdn.rawgit.com/Viglino/ol-ext/master/dist/ol-ext.min.js"></script>
    <!-- Plotly JS -->
    <script src="https://cdn.plot.ly/plotly-2.11.1.min.js"></script>
    <!-- Custom -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/gh/MaxDragonheart/cdn@main/css/ol_custom.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/gh/MaxDragonheart/cdn@main/css/geomedia.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/gh/MaxDragonheart/cdn@main/opengeodata/css/gis.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/gh/MaxDragonheart/cdn@main/opengeodata/css/app_gismanager.css">
    <script type="text/javascript"
            src="https://cdn.jsdelivr.net/gh/MaxDragonheart/cdn@main/opengeodata/js/gis.js"></script>

</head>
<body>

<div class="map-wrapper">

    <div class="map" id='map'></div>

    <div class="map-info">
        <button class="btn btn-map" type="button" data-bs-toggle="offcanvas" data-bs-target="#mapDescription" aria-controls="mapDescription">
            <span data-toggle="tooltip" data-placement="top" title="Descrizione">
                <i class="fas fa-book"></i>
            </span>
        </button>
        <div class="offcanvas offcanvas-end" tabindex="-1" id="mapDescription" aria-labelledby="mapDescriptionLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="mapDescriptionLabel">Confronto pre-post esplosione nel porto di Beirut</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <article class="text-justify">
                <p>Il <a href="https://www.ilsole24ore.com/art/libano-cosa-sappiamo-finora-sull-esplosione-che-ha-devastato-beirut-ADnc55h" target="_blank" rel="noopener">4 agosto 2020</a> Beirut, capitale del Libano, &egrave; stata scossa da una violentissima esplosione.</p>
                <p>Ad <a href="https://youtu.be/yUctlqoSFJc" target="_blank" rel="noopener">esplodere</a> sono state tonnellate di nitrato di ammonio stoccate in porto. Centinia i morti, migliaia i feriti, decine di migliaia gli sfollati.</p>
                <p>Utilizzando i dati del progetto <a href="https://sentinel.esa.int/web/sentinel/missions/sentinel-2" target="_blank" rel="noopener">Copernicus Sentinel-2</a> ho creato questa mappa che mette a confronto il prima ed il dopo esplosione. Le immagini fanno riferimento al 27 luglio ed al 8 agosto.</p>
            </article>
        </div>
    </div>

</div>

<div class="btn-map-legend">
    <button class="btn btn-map" type="button" data-bs-toggle="offcanvas" data-bs-target="#openMapControls" aria-controls="openMapControls">
        <span data-toggle="tooltip" data-placement="top" title="Descrizione">
            <i class="fas fa-layer-group"></i>
        </span>
    </button>
    <div class="offcanvas offcanvas-end" tabindex="-1" id="openMapControls" aria-labelledby="openMapControlsLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="openMapControlsLabel">Layers</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div class="px-2">
                <div class="custom-control custom-switch">
                    <input type="radio" class="custom-control-input" name="switch-basemap" id="BASEMAP_OSM" checked>
                    <label class="custom-control-label" for="BASEMAP_OSM">Lite</label>
                </div>
                <div class="custom-control custom-switch">
                    <input type="radio" class="custom-control-input" name="switch-basemap" id="BASEMAP_OUTDOORS">
                    <label class="custom-control-label" for="BASEMAP_OUTDOORS">Topographic</label>
                </div>
                <div class="custom-control custom-switch">
                    <input type="radio" class="custom-control-input" name="switch-basemap" id="BASEMAP_MONOCROMEGRAY">
                    <label class="custom-control-label" for="BASEMAP_MONOCROMEGRAY">Monocrome Gray</label>
                </div>
                <div class="custom-control custom-switch">
                    <input type="radio" class="custom-control-input" name="switch-basemap" id="BASEMAP_SATELLITE">
                    <label class="custom-control-label" for="BASEMAP_SATELLITE">Satellite</label>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="map-swipe-left">
    <h4>2020-08-08</h4>
</div>
<div class="map-swipe-right">
    <h4>2020-07-24</h4>
</div>

</div>

<script type="text/javascript">

    var map = new ol.Map({
        target: 'map',
        controls: ol.control.defaults({
            attribution: false
        }),
    });
    var scaleLine = new ol.control.ScaleLine({
        className: 'ol-scale-line',
        target: document.getElementById('scale-line')
    });
    map.addControl(scaleLine);
    var attribution = new ol.control.Attribution({
        className: 'ol-attribution',
        label: 'a',
        collapsible: true,
        collapsed: true,
        target: document.getElementById('map-attribution'),
    });
    map.addControl(attribution);
    var view = new ol.View({
      center: ol.proj.fromLonLat([35.51837, 33.90390]),
      zoom: 15,
      maxZoom: 16,
      minZoom: 14
    });
    map.setView(view);

    var osm = new ol.layer.Tile({
        source: new ol.source.OSM(),
        zIndex: 0
    });
    map.addLayer(osm);
    $('#BASEMAP_OSM').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(osm);
            map.removeLayer(outdoors);
            map.removeLayer(monocromeGray);
            map.removeLayer(satellite);
        } else {
            map.removeLayer(osm);
        }
    });
    var mapAttribution = '<a href="https://massimilianomoraca.it/" target="_blank">Massimiliano Moraca</a> has created this map using <a href="https://openlayers.org/" target="_blank">OpenLayers</a>'
    var userMapBox = 'maxdragonheart'
    var tokenMapBox = 'pk.eyJ1IjoibWF4ZHJhZ29uaGVhcnQiLCJhIjoiY2p4a2k3a2twMmF2aDN4czhwMzBoZ2x1eCJ9.upAxT3LK0NCiP_jBcErzNw'
    var outdoors = new ol.layer.Tile({
        title: 'Topographic',
        source: new ol.source.XYZ({
        attributions: mapAttribution,
            url: 'https://api.mapbox.com/styles/v1/' + userMapBox + '/'
                + 'cjxkimp5j5s0o1ct4b68n4x1p/tiles/256/{z}/{x}/{y}?'
                + 'access_token=' + tokenMapBox + ''
            }),
        zIndex: 0,
    });
    $('#BASEMAP_OUTDOORS').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(outdoors);
            map.removeLayer(osm);
            map.removeLayer(monocromeGray);
            map.removeLayer(satellite);
        } else {
            map.removeLayer(outdoors);
        }
    });
    var monocromeGray = new ol.layer.Tile({
        title: 'MonocromeGray',
        source: new ol.source.XYZ({
            attributions: mapAttribution,
            url: 'https://api.mapbox.com/styles/v1/' + userMapBox + '/'
                + 'ckcqb7nu809mu1inv9lfuj2ut/tiles/256/{z}/{x}/{y}?'
                + 'access_token=' + tokenMapBox + ''
        }),
        zIndex: 0,
    });
    $('#BASEMAP_MONOCROMEGRAY').on('change', function() {
        let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(monocromeGray);
            map.removeLayer(osm);
            map.removeLayer(outdoors);
            map.removeLayer(satellite);
        } else {
            map.removeLayer(monocromeGray);
        }
    });
    var satellite = new ol.layer.Tile({
        title: 'Satellite',
        source: new ol.source.XYZ({
            attributions: mapAttribution,
            url: 'https://api.mapbox.com/styles/v1/' + userMapBox + '/'
                + 'ck0l7j9cx27df1clhcyok70mk/tiles/256/{z}/{x}/{y}?'
                + 'access_token=' + tokenMapBox + ''
        }),
        zIndex: 0,
    });
    $('#BASEMAP_SATELLITE').on('change', function() {
    let isChecked = $(this).is(':checked');
        if (isChecked) {
            map.addLayer(satellite);
            map.removeLayer(osm);
            map.removeLayer(outdoors);
            map.removeLayer(monocromeGray);
        } else {
            map.removeLayer(satellite);
        }
    });

    var wmsSource = 'https://geoserver.massimilianomoraca.me/geoserver/MassimilianoMoraca/wms'
    var leftMap = new ol.layer.Tile({
      title: '2020-08-08',
      source: new ol.source.TileWMS({
        url: wmsSource,
        params: {
          'LAYERS': 'Beirut_20200808',
          'STYLES': null,
        }
      }),
      minZoom: 0,
      maxZoom: 28,
      zIndex: 1,
      opacity: 1.00
    });
    map.addLayer(leftMap)
    var rightMap = new ol.layer.Tile({
      title: '2020-07-24',
      source: new ol.source.TileWMS({
        url: wmsSource,
        params: {
          'LAYERS': 'Beirut_20200724',
          'STYLES': null,
        }
      }),
      minZoom: 0,
      maxZoom: 28,
      zIndex: 1,
      opacity: 1.00
    });
    map.addLayer(rightMap)

    var ctrl = new ol.control.Swipe();
    map.addControl(ctrl);
    ctrl.addLayer(leftMap);
    ctrl.addLayer(rightMap, true);
</script>

</body>
</html>